program Pract5Ej1;

Const DF= 300;

Type
ofi = record
	  cod: 0..DF;
	  DNI: integer;
	  valor: integer;
	  end;

vector = array [1..DF] of Ofi;

procedure ImprimirVector (v: vector; DL: integer);
begin;
	if (DL > 0) then begin;
		ImprimirVector(v, DL -1);
		writeln;
		writeln (v[DL].cod);
	end;
end;

procedure LeerOfi (var o:ofi); begin;
	o.cod:= random (DF+1);
	if (o.cod <> 0) then begin
		o.DNI:=random (30000+1);
		o.valor:=random(100)+1;
	end;
end;

procedure Carga (var v: vector; var DL: integer); 
var o: ofi;
begin
	LeerOfi (o);
	if (DL < DF ) and (o.cod <> 0) then begin
		DL:= DL + 1;
		v[DL]:= o;
		writeln;
		writeln ('El c贸digo fue: ', v[DL].cod, ' El DNI: ', v [DL].DNI, ' El valor: ', v[DL].valor, 'k');
		Carga (v, DL);
	end;
end;

procedure OrdenarVector (var v: vector; DL: integer);
var i, j: integer; actual: ofi;
begin;
	for i:= 2 to DL do begin;
		actual:= v[i];
		j:= i - 1;
		while (j <> 0) and (actual.cod < v[j].cod) do begin
			v[j+1]:= v[j];
			j:= j - 1;
		end;
		v[j+1]:= actual;
	end;
end;

function Busqueda (v: vector; elem:integer; fin: integer; ini: integer ): integer;
var medio: integer;
begin
	if (ini<= fin) then begin
		medio:= (ini + fin) DIV 2;
		if (elem = v[medio].cod) then Busqueda:= medio
		else if (elem < v[medio].cod) then Busqueda:= Busqueda (v, elem, medio-1, ini)
			 else Busqueda:= Busqueda (v, elem, fin, medio +1);
	end
	else Busqueda:= 0
end;

function CalcularExpensas(v:vector;diml:integer):integer;
begin
	if(diml>0) then begin
		writeln('EL VALOR QUE VOY A SUMAR ES: ',v[diml].valor);
		CalcularExpensas:=v[diml].valor+CalcularExpensas(v,diml-1);
	end
		else CalcularExpensas:=0;
end;

var v: vector; DL, elem: integer;
begin
	randomize;
	DL:=0;
	writeln('DIML:',DL);
	Carga (v, DL);
	writeln('DIML:',DL);
	writeln;
	writeln;
	OrdenarVector (v, DL);
	writeln('DIML:',DL);
	writeln;
	writeln;
	writeln ('C贸digos ordenados: ');
	writeln;
	writeln;
	ImprimirVector(v, DL);
	writeln('DIML:',DL);
	writeln;
	writeln;
	writeln ('Ingrese c贸digo a buscar: ');
	read (elem);
	writeln;
	writeln;
	If (Busqueda (v, elem, DL, 1) <> 0) then writeln ('El DNI del propietario es: ', v[Busqueda(v, elem, DL, 1)].DNI)
	else writeln ('No se encontr贸 la oficina');
	writeln('DIML:',DL);
	writeln;
	writeln;
	writeln ('El monto total de las expensas es de: $',CalcularExpensas(v, DL),'k');
	writeln('DIML:',DL);
end.
